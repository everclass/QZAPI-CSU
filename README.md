# QZAPI-CSU

中南大学强智教务系统 API

`http://csujwc.its.csu.edu.cn/app.do?method=`

> 在请求的 header 中增加 token 参数，值为使用 authUser API 后返回的 token。

## 登录帐号

authUser
### 参数

| 字段名 | 说明         |
| ------ | ------------ |
| xh     | 学号         |
| pwd    | 教务系统密码 |

### 响应数据

| 字段名       | 说明                        |
| ------------ | --------------------------- |
| flag         | 状态码，0 为失败，1 为成功  |
| userrealname | 用户真实姓名                |
| token        | 令牌，之后的 API 需要使用   |
| userdwmc     | 用户单位名称                |
| usertype     | 用户类别，2为学生，其他未知 |
| msg          | 返回消息                    |

## 获取课程表（疑似废弃）

getKbcxAzc

### 参数

| 字段名 | 说明                       |
| ------ | -------------------------- |
| xh     | 学号                       |
| xnxqid | 学年，格式为 `2021-2022-1` |
| zc     | 周次                       |

### 响应数据

响应内容为 json 数组, 每个元素如下：

| 字段名 | 说明                                    |
| ------ | --------------------------------------- |
| jsxm   | 教师姓名                                |
| jsmc   | 教室名称                                |
| jssj   | 结束时间                                |
| kssj   | 开始时间                                |
| kkzc   | 开课周次                                |
| kcsj   | 课程时间，`10102` 代表周一的第 1-2 节课 |  |
| kcmc   | 课程名称                                |
| sjbz   | 未知                                    |

## 获取空教室

getKxJscx

**classroomNumber**
> 

### 参数

| 字段名          | 说明                                                                                     |
| --------------- | ---------------------------------------------------------------------------------------- |
| time            | 查询日期                                                                                 |
| idleTime        | 上午为am，下午为pm，晚上为night 全天为allday                                             |
| xqid            | 校区 ID                                                                                  |
| jxlid           | 教学楼 ID                                                                                |
| classroomNumber | 可容纳人数，30为30 人以下，30-40为30-40 人，40-50为40-50 人，60为60 人以上，是否可用存疑 |

### 响应数据

响应内容为 json 数组, 每个元素如下：

| 字段名 | 说明     |
| ------ | -------- |
| jxl    | 教学楼   |
| jsList | 教室列表 |

#### JS

| 字段名 | 说明               |
| ------ | ------------------ |
| jsid   | 教室 ID            |
| jzwid  | 建筑物 ID          |
| jsmc   | 教室名称           |
| zws    | 座位数             |
| xqmc   | 校区名称           |
| jsh    | 教室号，同 jsid    |
| jzwmc  | 建筑物名称         |
| yxzws  | 余下座位数，同 zws |

## 获取校区

getXqcx

> 该 API 无需参数

### 响应数据

响应内容为 json 数组, 每个元素如下：

| 字段名 | 说明     |
| ------ | -------- |
| xqid   | 校区 ID  |
| xqmc   | 校区名称 |

## 获取校区教学楼信息 

getJxlcx

### 参数

| 字段名 | 说明    |
| ------ | ------- |
| xqid   | 校区 ID |

### 响应数据

响应内容为 json 数组, 每个元素如下：

| 字段名 | 说明       |
| ------ | ---------- |
| jzwid  | 建筑物 ID  |
| jzwmc  | 建筑物名称 |

## 获取帐号信息

getUserInfo

### 参数

| 字段名 | 说明 |
| ------ | ---- |
| xh     | 学号 |

### 响应数据

| 字段名   | 说明                        |
| -------- | --------------------------- |
| fxzy     | 辅修专业                    |
| xh       | 学号                        |
| xm       | 姓名                        |
| dqszj    | 未知                        |
| usertype | 用户类别，2为学生，其他未知 |
| yxmc     | 院系名称                    |
| xz       | 学制                        |
| bj       | 班级                        |
| dh       | 电话，一般没人会填          |
| email    | 邮箱，一般没人会填          |
| rxnf     | 入学年份                    |
| xb       | 性别                        |
| ksh      | 考生号                      |
| nj       | 年级                        |
| qq       | QQ 号，一般没人会填         |
| zymc     | 专业名称                    |

## 获取学年和学期信息

getXnxq

### 参数

| 字段名 | 说明 |
| ------ | ---- |
| xh     | 学号 |

### 响应数据

响应内容为 json 数组, 每个元素如下：

| 字段名   | 说明         |
| -------- | ------------ |
| isdqxq   | 是否当前学期 |
| xqmc     | 学期名称     |
| xnxq01id | 学年学期 ID  |

## 获取考试信息

getKscx

### 参数

| 字段名 | 说明 |
| ------ | ---- |
| xh     | 学号 |

### 响应数据

未在考试周，无法获得除 `null` 之外的响应

## 获取学籍预警信息

getEarlyWarnInfo

### 参数

| 字段名  | 说明             |
| ------- | ---------------- |
| xh      | 学号             |
| history | 当前为0，历史为1 |

### 响应数据

响应内容为 json 数组, 每个元素如下：

| 字段名 | 说明     |
| ------ | -------- |
| cljg   | 处理结果 |
| xqmc   | 学期名称 |
| yjmc   | 预警名称 |